{
  "id": "add_to_portfolio",
  "name": "Add to Portfolio",
  "description": "Adds a position to the tracked portfolio",
  "triggers": ["buy", "purchase", "add position", "portfolio add"],
  "entities": ["SYMBOL", "QUANTITY", "PRICE"],
  "priority": 6,
  "steps": [
    {
      "agent": "data_harvester",
      "method": "process",
      "params": {
        "request": "Get current price and fundamentals for {SYMBOL}"
      },
      "output": "asset_data"
    },
    {
      "agent": "data_digester",
      "method": "process",
      "params": {
        "data": {
          "action": "add_position",
          "symbol": "{SYMBOL}",
          "quantity": "{QUANTITY}",
          "price": "{PRICE}",
          "asset_data": "{asset_data}"
        },
        "data_type": "portfolio_transaction"
      },
      "output": "position"
    },
    {
      "agent": "claude",
      "method": "process",
      "params": {
        "user_input": "Added {SYMBOL} to portfolio: {position}. Current data: {asset_data}"
      },
      "output": "confirmation"
    }
  ],
  "response_type": "action",
  "response_template": "{confirmation}",
  "cache_ttl": 0
}