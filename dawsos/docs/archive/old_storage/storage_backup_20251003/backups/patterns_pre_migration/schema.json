{
  "_comment": "Pattern Schema Definition for DawsOS",
  "schema": {
    "id": "Unique identifier for the pattern",
    "name": "Human-readable name",
    "description": "What this pattern does",
    "triggers": ["array", "of", "trigger", "words"],
    "entities": ["SYMBOL", "INDICATOR", "etc"],
    "priority": "1-10 (higher = preferred when multiple patterns match)",
    "steps": [
      {
        "agent": "agent_name",
        "method": "method_to_call (default: process)",
        "params": {
          "key": "value or {variable}",
          "symbol": "{SYMBOL}",
          "user_input": "{user_input}",
          "previous_result": "{step_0.data}"
        },
        "output": "variable_name_to_store_result"
      }
    ],
    "response_type": "stock_quote|regime_analysis|forecast|generic",
    "response_template": "Optional template like: {SYMBOL} is trading at ${quote_data.price}",
    "error_handling": "continue|stop|fallback",
    "cache_ttl": "seconds to cache result (0 = no cache)"
  },
  "variables": {
    "{user_input}": "The original user input",
    "{SYMBOL}": "Extracted stock symbol from input",
    "{step_name.field}": "Access field from previous step output",
    "{context.field}": "Access field from initial context"
  },
  "response_types": {
    "stock_quote": "Display as price card with metrics",
    "regime_analysis": "Display as regime card with indicators",
    "forecast": "Display as forecast chart",
    "generic": "Display as text"
  }
}