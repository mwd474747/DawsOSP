{
  "id": "opportunity_scan",
  "name": "Market Opportunity Scanner",
  "description": "Scans markets for trading and investment opportunities (Trinity 2.0 capability routing)",
  "category": "workflows",
  "triggers": [
    "scan",
    "opportunities",
    "find trades",
    "screening",
    "ideas"
  ],
  "entities": [],
  "priority": 8,
  "steps": [
    {
      "description": "",
      "action": "execute_through_registry",
      "params": {
        "capability": "can_fetch_stock_quotes",
        "context": {}
      },
      "save_as": "market_scan"
    },
    {
      "action": "execute_through_registry",
      "params": {
        "context": {
          "data": "{market_scan}",
          "analysis_type": "opportunity_detection"
        },
        "capability": "can_detect_patterns"
      },
      "save_as": "opportunities"
    },
    {
      "description": "",
      "action": "execute_through_registry",
      "params": {
        "capability": "can_fetch_fundamentals",
        "context": {}
      },
      "save_as": "opportunity_data"
    },
    {
      "action": "execute_through_registry",
      "params": {
        "agent": "claude",
        "context": {
          "user_input": "Analyze opportunities from {opportunities} with data {opportunity_data}. Rank by: 1) Risk/Reward 2) Technical Setup 3) Fundamental Quality 4) Catalyst. Provide top 5 ideas with entry/exit/stop levels"
        }
      },
      "save_as": "opportunity_report"
    }
  ],
  "template": "üîé **Market Opportunity Scanner**\n\n{opportunity_report.response}\n\n---\n\nüèÜ **Top 5 Opportunities Ranked**\n\n{opportunity_report.top_opportunities}\n\nüìä **Ranking Criteria**\n‚Ä¢ Risk/Reward Ratio\n‚Ä¢ Technical Setup Quality\n‚Ä¢ Fundamental Strength\n‚Ä¢ Catalyst Timing\n\nüí° **Opportunity #1: {opportunities.top1_symbol}**\n‚Ä¢ Entry: ${opportunities.top1_entry}\n‚Ä¢ Target: ${opportunities.top1_target}\n‚Ä¢ Stop Loss: ${opportunities.top1_stop}\n‚Ä¢ Risk/Reward: {opportunities.top1_rr}\n‚Ä¢ Setup: {opportunities.top1_setup}\n\nüí° **Opportunity #2: {opportunities.top2_symbol}**\n‚Ä¢ Entry: ${opportunities.top2_entry}\n‚Ä¢ Target: ${opportunities.top2_target}\n‚Ä¢ Stop Loss: ${opportunities.top2_stop}\n‚Ä¢ Risk/Reward: {opportunities.top2_rr}\n‚Ä¢ Setup: {opportunities.top2_setup}\n\nüí° **Opportunity #3: {opportunities.top3_symbol}**\n‚Ä¢ Entry: ${opportunities.top3_entry}\n‚Ä¢ Target: ${opportunities.top3_target}\n‚Ä¢ Stop Loss: ${opportunities.top3_stop}\n‚Ä¢ Risk/Reward: {opportunities.top3_rr}\n‚Ä¢ Setup: {opportunities.top3_setup}\n\n‚ö†Ô∏è **Market Conditions**\n{market_scan.conditions}\n\n*Opportunity scanner powered by DawsOS Trinity Architecture*",
  "response_type": "opportunities",
  "response_template": "{opportunity_report}",
  "cache_ttl": 600,
  "version": "2.0",
  "last_updated": "2025-10-08"
}