{
  "id": "options_flow_analysis",
  "name": "Options Flow Analysis",
  "description": "Analyzes put/call flow across multiple tickers for market sentiment",
  "category": "analysis",
  "triggers": [
    "options flow",
    "put call ratio",
    "market sentiment from options",
    "flow analysis"
  ],
  "entities": [
    "TICKERS"
  ],
  "priority": 85,
  "steps": [
    {
      "action": "execute_through_registry",
      "params": {
        "capability": "can_fetch_options_flow",
        "context": {
          "tickers": "{TICKERS}"
        }
      },
      "save_as": "flow_data"
    },
    {
      "action": "execute_through_registry",
      "params": {
        "capability": "can_analyze_options_flow",
        "context": {
          "tickers": "{TICKERS}",
          "flow_data": "{flow_data}"
        }
      },
      "save_as": "flow_sentiment"
    },
    {
      "action": "execute_through_registry",
      "params": {
        "capability": "can_add_nodes",
        "context": {
          "node_type": "options_flow_analysis",
          "data": "{flow_sentiment}",
          "metadata": {
            "tickers": "{TICKERS}",
            "timestamp": "{now}"
          }
        }
      },
      "save_as": "graph_node"
    }
  ],
  "response_type": "analysis",
  "response_template": "Options Flow Analysis for {TICKERS}:\n\nPut/Call Ratio: {flow_sentiment.put_call_ratio}\nSentiment: {flow_sentiment.sentiment}\nConfidence: {flow_sentiment.confidence}\nDirection: {flow_sentiment.direction}",
  "cache_ttl": 300,
  "version": "2.0",
  "last_updated": "2025-10-07",
  "template": "## Options Flow Analysis\n\n**Tickers Analyzed**: {TICKERS}\n\n**Put/Call Ratio**: {flow_sentiment.put_call_ratio}\n**Market Sentiment**: {flow_sentiment.sentiment}\n**Directional Bias**: {flow_sentiment.direction}\n\n**Confidence**: {flow_sentiment.confidence}%\n\n*Flow analysis powered by DawsOS Trinity 2.0*"
}