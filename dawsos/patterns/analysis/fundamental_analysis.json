{
  "id": "fundamental_analysis",
  "name": "Fundamental Analysis",
  "trigger_phrases": [
    "analyze fundamentals",
    "fundamental analysis",
    "company analysis",
    "stock fundamentals",
    "evaluate company",
    "analyze {symbol}",
    "value {symbol}"
  ],
  "description": "Perform comprehensive fundamental analysis using Buffett and Dalio frameworks",
  "category": "analysis",
  "priority": 90,
  "response": {
    "template": "\ud83d\udcca Fundamental Analysis: {symbol}\n\n\ud83c\udff0 **Economic Moat Assessment**\n{moat_assessment}\n\n\ud83d\udcb0 **Key Metrics**\n{key_metrics}\n\n\ud83d\udcc8 **Valuation**\n\u2022 Intrinsic Value: {intrinsic_value}\n\u2022 Current Price: {current_price}\n\u2022 Margin of Safety: {margin_of_safety}%\n\n\ud83c\udfaf **Investment Decision**\n{recommendation}",
    "format": "markdown"
  },
  "version": "1.0",
  "last_updated": "2025-10-02",
  "steps": [
    {
      "action": "knowledge_lookup",
      "params": {
        "knowledge_files": [
          "buffett_framework.json",
          "dalio_framework.json",
          "financial_calculations.json"
        ]
      }
    },
    {
      "action": "execute_through_registry",
      "params": {
        "agent": "data_harvester",
        "context": {
          "request": "Get financial data for {symbol}",
          "data_points": [
            "revenue",
            "earnings",
            "free_cash_flow",
            "debt",
            "equity",
            "margins"
          ]
        }
      },
      "outputs": [
        "financial_data"
      ]
    },
    {
      "action": "calculate",
      "outputs": [
        "key_metrics"
      ],
      "params": {
        "formulas": {
          "owner_earnings": "Net Income + D&A - Maintenance CapEx",
          "roic": "NOPAT / Invested Capital",
          "fcf_yield": "FCF / Market Cap"
        }
      }
    },
    {
      "action": "execute_through_registry",
      "params": {
        "agent": "pattern_spotter",
        "context": {
          "request": "Evaluate economic moat for {symbol}",
          "framework": "buffett_moat_analysis"
        }
      },
      "outputs": [
        "moat_assessment"
      ]
    },
    {
      "action": "calculate",
      "outputs": [
        "intrinsic_value"
      ],
      "params": {
        "method": "dcf_simplified",
        "inputs": "{financial_data}"
      }
    }
  ]
}