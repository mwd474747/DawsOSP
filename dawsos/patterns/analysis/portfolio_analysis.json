{
  "id": "portfolio_analysis",
  "name": "Portfolio Analysis",
  "description": "Analyzes portfolio composition, risk, and performance (Trinity 2.0 capability routing)",
  "triggers": [
    "portfolio",
    "holdings",
    "allocation",
    "diversification",
    "risk"
  ],
  "entities": [],
  "priority": 8,
  "steps": [
    {
      "action": "execute_through_registry",
      "params": {
        "context": {
          "request": "Get portfolio holdings from knowledge graph"
        },
        "capability": "can_fetch_stock_quotes"
      },
      "save_as": "holdings"
    },
    {
      "description": "",
      "action": "execute_through_registry",
      "params": {
        "capability": "can_fetch_fundamentals",
        "context": {}
      },
      "save_as": "portfolio_data"
    },
    {
      "action": "execute_through_registry",
      "params": {
        "context": {
          "data": "{portfolio_data}",
          "analysis_type": "portfolio_risk"
        },
        "capability": "can_detect_patterns"
      },
      "save_as": "risk_metrics"
    },
    {
      "action": "execute_through_registry",
      "params": {
        "agent": "claude",
        "context": {
          "user_input": "Analyze portfolio with {holdings} and metrics {risk_metrics}. Provide: 1) Asset allocation 2) Risk assessment 3) Diversification score 4) Performance attribution 5) Rebalancing suggestions"
        }
      },
      "save_as": "portfolio_report"
    }
  ],
  "response_type": "analysis",
  "response_template": "{portfolio_report}",
  "cache_ttl": 600,
  "version": "2.0",
  "last_updated": "2025-10-08"
}