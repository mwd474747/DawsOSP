{
  "id": "owner_earnings",
  "name": "Owner Earnings Calculation",
  "trigger_phrases": [
    "owner earnings",
    "calculate owner earnings",
    "buffett earnings",
    "true earnings for {symbol}",
    "cash earnings"
  ],
  "description": "Calculate Buffett's owner earnings metric",
  "category": "analysis",
  "priority": 80,
  "response": {
    "template": "\ud83d\udcb0 **Owner Earnings Analysis for {symbol}**\n\n\ud83d\udcca **Calculation**\n```\nNet Income:           ${net_income}M\n+ D&A:               ${depreciation}M\n- Maintenance CapEx:  ${maintenance_capex}M\n+/- Working Capital:  ${working_capital}M\n+ Stock Comp Adj:     ${stock_comp}M\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nOwner Earnings:       ${owner_earnings}M\n```\n\n\ud83d\udcc8 **Key Insights**\n\u2022 Owner Earnings Yield: {owner_yield}%\n\u2022 vs Net Income: {earnings_quality}\n\u2022 3-Year Growth: {growth_rate}%\n\n\u2705 **Quality Assessment**\n{quality_assessment}\n\n\ud83d\udca1 **What This Means**\n{interpretation}",
    "format": "markdown"
  },
  "version": "1.0",
  "last_updated": "2025-10-02",
  "steps": [
    {
      "action": "knowledge_lookup",
      "params": {
        "knowledge_file": "financial_calculations.json",
        "section": "buffett_calculations.owner_earnings"
      }
    },
    {
      "action": "execute_through_registry",
      "params": {
        "agent": "data_harvester",
        "context": {
          "request": "Get financial data for {symbol}",
          "items": [
            "net_income",
            "depreciation_amortization",
            "capex",
            "working_capital_changes",
            "stock_compensation"
          ]
        }
      },
      "outputs": [
        "financial_data"
      ]
    },
    {
      "action": "calculate",
      "outputs": [
        "owner_earnings",
        "calculation_steps"
      ],
      "params": {
        "formula": "Net Income + D&A - Maintenance CapEx +/- Working Capital Changes",
        "inputs": "{financial_data}"
      }
    },
    {
      "action": "evaluate",
      "outputs": [
        "quality_assessment"
      ],
      "params": {
        "checks": [
          "owner_earnings > net_income",
          "owner_earnings_growth > revenue_growth",
          "consistent_positive_earnings"
        ]
      }
    }
  ]
}