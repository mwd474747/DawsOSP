{
  "id": "policy_validation",
  "name": "Policy-Based Validation Pattern",
  "description": "Validate data against governance policies loaded from configuration",
  "category": "governance",
  "extends": "governance_template",
  "input_schema": {
    "required": ["target_nodes"],
    "optional": ["policy_file", "auto_remediate"]
  },
  "default_parameters": {
    "policy_file": "knowledge/governance_policies.json",
    "auto_remediate": "true"
  },
  "steps": [
    {
      "order": 1,
      "agent": "governance",
      "action": "load_policies",
      "parameters": {
        "policy_file": "{policy_file}"
      }
    },
    {
      "order": 2,
      "agent": "governance",
      "action": "validate_nodes",
      "parameters": {
        "nodes": "{target_nodes}",
        "policies": "{step_1.policies}"
      }
    },
    {
      "order": 3,
      "agent": "governance",
      "action": "apply_remediation",
      "parameters": {
        "violations": "{step_2.violations}",
        "auto_fix": "{auto_remediate}"
      },
      "condition": "{step_2.violations_found}"
    },
    {
      "order": 4,
      "agent": "governance",
      "action": "update_graph_governance",
      "parameters": {
        "validation_results": "{step_2}",
        "remediation_results": "{step_3}"
      }
    }
  ],
  "triggers": [
    "validate data",
    "check policies",
    "enforce governance"
  ],
  "confidence_factors": {
    "policy_coverage": 0.3,
    "validation_success": 0.4,
    "remediation_effectiveness": 0.3
  },
  "template": "**Policy Validation Report**\n\n**Nodes Validated**: {target_nodes}\n**Policies Applied**: {step_1.policies|length}\n\n**Validation Results**:\n✅ Compliant: {step_2.compliant_count}\n⚠️ Violations: {step_2.violations|length}\n\n{#step_2.violations}\n**Violation {index}**:\n- Node: {.node}\n- Policy: {.policy}\n- Severity: {.severity}\n- Message: {.message}\n{#step_3.fixed}\n✓ Auto-remediated\n{/step_3.fixed}\n{/step_2.violations}\n\n**Graph Governance Updated**: {step_4.success}\n\n*Powered by DawsOS Trinity Architecture with policy-driven governance*"
}